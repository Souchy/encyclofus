{"version":3,"file":"index.mjs","sources":["../../src/util.ts","../../src/retry-interceptor.ts","../../src/http-client-configuration.ts","../../src/http-client.ts"],"sourcesContent":[null,null,null,null],"names":["json","body","replacer","JSON","stringify","undefined","retryStrategy","fixed","incremental","exponential","random","defaultRetryConfig","maxRetries","interval","strategy","RetryInterceptor","constructor","retryConfig","this","Error","request","counter","requestClone","clone","response","Reflect","deleteProperty","responseError","error","httpClient","Promise","resolve","then","result","doRetry","delay","calculateDelay","setTimeout","isNaN","newRequest","beforeRetry","retryableRequest","fetch","minRandomInterval","maxRandomInterval","retryStrategies","retryCount","Math","HttpClientConfiguration","baseUrl","defaults","interceptors","dispatcher","withBaseUrl","withDefaults","withInterceptor","interceptor","push","useStandardConfiguration","standardConfig","credentials","Object","assign","rejectErrorResponses","rejectOnError","withRetry","config","withDispatcher","ok","absoluteUrlRegexp","IHttpClient","DI","createInterface","x","singleton","HttpClient","activeRequestCount","isRequesting","isConfigured","configure","normalizedConfig","requestInitConfiguration","c","prototype","isPrototypeOf","call","Headers","headers","length","filter","retryInterceptorIndex","findIndex","input","init","trackRequestStart","buildRequest","processRequest","Response","Request","processResponse","trackRequestEnd","requestContentType","parsedDefaultHeaders","parseHeaderValues","get","bodyObj","requestInit","getRequestUrl","has","set","isJSON","setDefaultHeaders","Blob","type","post","callFetch","put","patch","delete","evt","ownerDocument","defaultView","CustomEvent","bubbles","cancelable","dispatchEvent","applyInterceptors","successName","errorName","interceptorArgs","reduce","chain","successHandler","errorHandler","value","identity","reason","thrower","method","parsedHeaders","$headers","name","hasOwnProperty","url","test","defaultHeaders","$defaultHeaders","str","parse","err"],"mappings":"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"}