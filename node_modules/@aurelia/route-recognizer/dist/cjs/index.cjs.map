{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Parameter","constructor","name","isOptional","isStar","this","ConfigurableRoute","path","caseSensitive","handler","Endpoint","route","params","RecognizedRoute","endpoint","Candidate","chars","states","skippedStates","result","head","length","_a","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","nextStates","Error","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","param","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","rootState","candidates","isEmpty","getSolution","filter","sort","splice","indexOf","slice","RouteRecognizer","State","cache","Map","endpointLookup","routeOrRoutes","Array","$add","clear","lookup","has","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","set","recognize","get","$recognize","decodeURI","startsWith","getEndpoint","prevState","value","optional","undefined","find","s","equals","includes","SegmentKind","toUpperCase","toLowerCase"],"mappings":"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"}