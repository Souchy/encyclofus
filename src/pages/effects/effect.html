<import from="./effectlist"></import>
<import from="../breeds/spell"></import>

<!-- ${effect.effectId} - ${effect.effectUid} -->
<!-- ${effect.effect?.effectPriority} - ${effect.effect?.effectPowerRate} -->

<table class="table table-striped table-sm table-borderless ${effectTypeStyle}" css="--bs-table-striped-bg: none; margin-bottom: 0px;" if.bind="emerald.effects">
    <tbody>
        <tr id="${effect.effectUid}" data-effect="${effect?.effectId}" data-charac="${effect?.effect?.characteristic}">
            <td style="width: 20px; padding: 0px; padding-left: 4px;" if.bind="getIcon(effect)">
                <div style.bind="getIcon(effect)"></div>
            </td>
            <td innerHtml.bind="renderEffectI18n(effect)" style="vertical-align: middle;"></td>
            <td if.bind="isStateSubspell(effect)" style="vertical-align: middle; position: absolute; left: 0px; width: 100%; height: 100%;">
                <spell class="spellHover" if.bind="depth <= 1" spellid.bind="getStateSubspellId(effect)" depth.bind="depth+1"></spell>
            </td>
            <td if.bind="isDuration(effect)" class="tooltipx" style="vertical-align: middle; width: 25px; height: 32px; ">
                <img style="vertical-align: middle; margin-left: -10px; margin-right: -10px;" src.bind="getDispellIcon(effect)"></img>
                <div class="tooltiptext">${getDispellString(effect)}</div>
            </td>
            <td if.bind="hasTargetIcon(effect)" class="tooltipx" style="width: 22px; height: 32px; padding: 4px; vertical-align: middle;">
                <img style="vertical-align: middle; margin-left: 2px;" src.bind="getTargetIcon(effect)"></img>
                <div class="tooltiptext" innerHtml.bind="getTargetString(effect)"></div>
            </td>
            <td if.bind="db.getAoeIconUrl(effect)" class="tooltipx" style="width: 37px; height: 32px; padding: 0px; vertical-align: middle;">
                <img style="width: 36px; height: 18px;" src.bind="db.getAoeIconUrl(effect)"></img>
                <div class="tooltiptext">${getZoneString(effect)}</div>
            </td>
        </tr>
    </tbody>
</table>

<!-- TRAPS -->
<!-- normal effects -->
<effectlist if.bind="hasTrapGlyph(effect) && !iscrit" effects.bind="getTrapGlyph(effect).effects" depth.bind="depth+1"></effectlist>
<!-- have no crit effects -->
<effectlist if.bind="hasTrapGlyph(effect) && iscrit" effects.bind="getTrapGlyph(effect).effects" depth.bind="depth+1" ></effectlist>

<!-- SUB SPELLS -->
<!-- normal effects -->
<effectlist if.bind="hasSubSpell(effect) && !iscrit && !isStateSubspell(effect)" effects.bind="getSubSpell(effect).effects" depth.bind="depth+1"></effectlist>
<!-- crit effects -->
<effectlist if.bind="hasSubSpell(effect) && iscrit && !isStateSubspell(effect)" effects.bind="getSubSpell(effect).criticalEffect" depth.bind="depth+1"></effectlist>
